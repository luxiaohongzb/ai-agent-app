25-08-22.10:36:08.197 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 48020 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.10:36:08.200 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.10:36:14.077 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.10:36:14.097 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.10:36:14.097 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.10:36:15.189 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.10:36:16.437 [main            ] INFO  AgentTest              - Started AgentTest in 9.066 seconds (process running for 10.722)
25-08-22.10:36:16.447 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.10:36:16.452 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:36:16.452 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:36:16.454 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:36:16.454 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:36:16.456 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:36:16.457 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:36:16.512 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.10:36:17.306 [pool-2-thread-2 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@309d8403
25-08-22.10:36:17.309 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.10:36:18.920 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:18.921 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:18.930 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:36:18.931 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:18.943 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:36:18.943 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:36:18.943 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:36:19.316 [HttpClient-12-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:36:19.369 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:36:19.372 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:36:19.372 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:36:19.372 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:36:19.542 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:36:19.581 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:36:19.582 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:36:19.582 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:19.702 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:36:19.704 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:36:19.704 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:19.708 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:36:19.816 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.10:36:19.817 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:19.840 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.10:36:19.841 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:36:19.841 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:36:19.841 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:36:19.842 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:36:19.842 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.10:36:19.842 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.10:36:21.204 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.10:36:21.204 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.10:36:21.205 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.10:36:21.206 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.10:36:21.206 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.10:36:21.207 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.10:36:21.770 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:21.770 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:21.777 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:36:21.777 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:21.777 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:36:21.777 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:36:21.777 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:36:21.934 [HttpClient-12-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id e0d403aa-0
25-08-22.10:36:21.944 [HttpClient-16-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:36:21.985 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:36:21.987 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:36:21.987 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:36:21.987 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:36:22.145 [HttpClient-13-Worker-1] WARN  McpClientSession       - Unexpected response for unknown id fbf4b68c-0
25-08-22.10:36:22.157 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:36:22.195 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:36:22.196 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:36:22.196 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:22.196 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:36:22.316 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:36:22.316 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:22.317 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:36:22.317 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:36:22.318 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:36:22.319 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:36:22.319 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:36:22.319 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:36:22.320 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@7246b33b
25-08-22.10:36:22.321 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 1 message hello
25-08-22.10:36:23.321 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.10:36:23.860 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@7795b961
25-08-22.10:36:23.861 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.10:36:24.010 [main            ] INFO  AiAgentChatService     - 
25-08-22.10:36:24.127 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.10:36:24.273 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.10:36:24.276 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.10:36:24.571 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.10:40:48.970 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 42872 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.10:40:48.973 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.10:40:54.787 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.10:40:54.802 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.10:40:54.803 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.10:40:55.887 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.10:40:57.082 [main            ] INFO  AgentTest              - Started AgentTest in 8.953 seconds (process running for 10.781)
25-08-22.10:40:57.089 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.10:40:57.093 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:40:57.094 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:40:57.095 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:40:57.095 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:40:57.096 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:40:57.097 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:40:57.151 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.10:40:58.133 [pool-2-thread-1 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2ac13802
25-08-22.10:40:58.137 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.10:40:59.655 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:40:59.656 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:40:59.664 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:40:59.664 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:40:59.675 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:40:59.676 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:40:59.676 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:41:00.057 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:41:00.116 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:41:00.119 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:41:00.120 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:41:00.120 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:41:00.307 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:41:00.354 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:41:00.354 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:41:00.355 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:00.495 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:41:00.495 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:41:00.496 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:00.501 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:41:00.612 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.10:41:00.613 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:00.629 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.10:41:00.630 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:41:00.631 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:41:00.631 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:41:00.631 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:41:00.631 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.10:41:00.631 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.10:41:02.009 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.10:41:02.009 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.10:41:02.009 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.10:41:02.010 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.10:41:02.011 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.10:41:02.010 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.10:41:02.579 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:02.579 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:02.585 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:41:02.586 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:02.586 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:41:02.586 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:41:02.586 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:41:02.779 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 2544ae39-0
25-08-22.10:41:02.783 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:41:02.825 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:41:02.827 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:41:02.827 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:41:02.827 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:41:03.015 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id ecad6999-0
25-08-22.10:41:03.024 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:41:03.064 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:41:03.064 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:41:03.064 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:03.065 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:41:03.169 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:41:03.170 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:03.170 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:41:03.170 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:41:03.172 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:41:03.172 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:41:03.173 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:41:03.173 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:41:03.175 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@33d7d560
25-08-22.10:41:03.177 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 1 message hello
25-08-22.10:41:04.177 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.10:41:04.704 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@76c523a2
25-08-22.10:41:04.704 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.10:41:04.857 [main            ] INFO  AiAgentChatService     - 
25-08-22.10:41:05.001 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.10:41:05.010 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.10:41:05.130 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.10:41:05.132 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.10:41:05.389 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.10:50:21.510 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 25092 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.10:50:21.512 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.10:50:27.313 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.10:50:27.327 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.10:50:27.328 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.10:50:28.275 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.10:50:29.507 [main            ] INFO  AgentTest              - Started AgentTest in 8.935 seconds (process running for 10.904)
25-08-22.10:50:29.514 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.10:50:29.519 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:50:29.519 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:50:29.522 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:50:29.522 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:50:29.522 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:50:29.524 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:50:29.573 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.10:50:30.941 [pool-2-thread-5 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b536fc
25-08-22.10:50:30.944 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.10:50:32.542 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:32.543 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:32.556 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:50:32.557 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:32.572 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:50:32.573 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:50:32.573 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:50:33.030 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:50:33.085 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:50:33.090 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:50:33.090 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:50:33.090 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:50:33.304 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:50:33.389 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:50:33.390 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:50:33.390 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:33.537 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:50:33.537 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:50:33.538 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:33.545 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:50:33.647 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.10:50:33.647 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:33.665 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.10:50:33.667 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:50:33.667 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:50:33.667 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:50:33.668 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:50:33.668 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.10:50:33.668 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.10:50:35.111 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.10:50:35.111 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.10:50:35.111 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.10:50:35.112 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.10:50:35.112 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.10:50:35.114 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.10:50:35.787 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:35.788 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:35.811 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:50:35.811 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:35.812 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:50:35.813 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:50:35.813 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:50:35.998 [HttpClient-12-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 014c9113-0
25-08-22.10:50:36.007 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:50:36.048 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:50:36.050 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:50:36.051 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:50:36.051 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:50:36.214 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 9e53743e-0
25-08-22.10:50:36.223 [HttpClient-17-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:50:36.265 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:50:36.266 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:50:36.266 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:36.267 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:50:36.375 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:50:36.375 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:36.377 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:50:36.377 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:50:36.377 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:50:36.378 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:50:36.378 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:50:36.379 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:50:36.379 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@28ffc54c
25-08-22.10:50:36.380 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 1 message hello
25-08-22.10:53:08.548 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=2m37s492ms633µs100ns).
25-08-22.10:53:48.538 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.10:53:52.306 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@2fac292
25-08-22.10:53:52.308 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.10:54:44.427 [PgVectorHikariPool housekeeper] WARN  HikariPool             - PgVectorHikariPool - Thread starvation or clock leap detected (housekeeper delta=52s15ms167µs900ns).
25-08-22.10:54:44.427 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=57s455ms431µs600ns).
25-08-22.10:54:48.624 [main            ] INFO  AiAgentChatService     - 
25-08-22.10:55:55.719 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoMapFuseable] :
	reactor.core.publisher.Mono.map(Mono.java:3490)
	org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:196)
Error has been observed at the following site(s):
	*____________Mono.map ⇢ at org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:196)
	|_   Mono.flatMapMany ⇢ at org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:197)
	|_           Flux.map ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregateAdvisedResponse(MessageAggregator.java:56)
	|_ Flux.doOnSubscribe ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:94)
	|_      Flux.doOnNext ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:105)
	|_  Flux.doOnComplete ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:144)
Original Stack Trace:
		at org.springframework.util.Assert.notNull(Assert.java:181)
		at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
		at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
		at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
		at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)
		at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:252)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
		at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.10:56:11.967 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.10:56:11.968 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.10:56:11.972 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.10:56:12.181 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.10:56:40.082 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 39604 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.10:56:40.084 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.10:56:45.691 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.10:56:45.705 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.10:56:45.706 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.10:56:46.685 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.10:56:47.984 [main            ] INFO  AgentTest              - Started AgentTest in 8.741 seconds (process running for 10.449)
25-08-22.10:56:47.990 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.10:56:48.013 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:56:48.014 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:56:48.015 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:56:48.016 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:56:48.016 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:56:48.017 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:56:48.070 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.10:56:49.061 [pool-2-thread-1 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@7fdf3dd9
25-08-22.10:56:49.065 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.10:56:50.585 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:50.585 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:50.594 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:56:50.594 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:50.606 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:56:50.607 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:56:50.607 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:56:50.973 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:56:51.031 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:56:51.036 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:56:51.036 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:56:51.036 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:56:51.219 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:56:51.267 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:56:51.268 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:56:51.268 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:51.387 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:56:51.387 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:56:51.387 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:51.391 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:56:51.500 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.10:56:51.500 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:51.514 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.10:56:51.516 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:56:51.517 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:56:51.517 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:56:51.517 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:56:51.517 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.10:56:51.518 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.10:56:52.674 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.10:56:52.675 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.10:56:52.675 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.10:56:52.675 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.10:56:52.676 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.10:56:52.676 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.10:56:53.190 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:53.191 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:53.201 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:56:53.201 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:53.202 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:56:53.202 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:56:53.202 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:56:53.362 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 38aeecaf-0
25-08-22.10:56:53.373 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:56:53.421 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:56:53.423 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:56:53.424 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:56:53.424 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:56:53.611 [HttpClient-13-Worker-1] WARN  McpClientSession       - Unexpected response for unknown id 113a36c1-0
25-08-22.10:56:53.617 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:56:53.656 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:56:53.657 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:56:53.657 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:53.658 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:56:53.747 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:56:53.749 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:53.749 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:56:53.749 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:56:53.750 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:56:53.750 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:56:53.751 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:56:53.751 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:56:53.751 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@5751724d
25-08-22.10:56:53.753 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 1 message hello
25-08-22.10:56:54.574 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.10:56:55.102 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@172ac29d
25-08-22.10:56:55.102 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.10:56:55.256 [main            ] INFO  AiAgentChatService     - 
25-08-22.10:56:55.384 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.10:56:55.394 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.10:56:55.528 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.10:56:55.531 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.10:56:55.792 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.10:59:22.659 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 46068 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.10:59:22.661 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.10:59:29.373 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.10:59:29.386 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.10:59:29.387 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.10:59:30.365 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.10:59:31.824 [main            ] INFO  AgentTest              - Started AgentTest in 10.09 seconds (process running for 11.9)
25-08-22.10:59:31.831 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.10:59:31.837 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:59:31.837 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:59:31.839 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:59:31.840 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:59:31.841 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:59:31.841 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.10:59:31.907 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.10:59:32.753 [ForkJoinPool.commonPool-worker-1] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@345aaa75
25-08-22.10:59:32.754 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.10:59:34.657 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:34.657 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:34.666 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:59:34.667 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:34.681 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:59:34.682 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:59:34.682 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:59:35.052 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:59:35.111 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:59:35.114 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:59:35.115 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:59:35.115 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:59:35.287 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:59:35.329 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:59:35.331 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:59:35.331 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:35.481 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:59:35.481 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:59:35.482 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:35.487 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:59:35.595 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.10:59:35.595 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:35.612 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.10:59:35.613 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:59:35.614 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:59:35.614 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:59:35.614 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:59:35.614 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.10:59:35.615 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.10:59:36.825 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.10:59:36.826 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.10:59:36.826 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.10:59:36.825 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.10:59:36.826 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.10:59:36.826 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.10:59:37.362 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:37.363 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:37.371 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.10:59:37.371 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:37.371 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.10:59:37.371 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.10:59:37.372 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:59:37.543 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id d504d9e6-0
25-08-22.10:59:37.552 [HttpClient-16-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.10:59:37.600 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.10:59:37.602 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.10:59:37.602 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.10:59:37.603 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.10:59:37.753 [HttpClient-13-Worker-1] WARN  McpClientSession       - Unexpected response for unknown id 75a89c73-0
25-08-22.10:59:37.760 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.10:59:37.798 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.10:59:37.800 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.10:59:37.800 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:37.801 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.10:59:37.895 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.10:59:37.895 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:37.896 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.10:59:37.896 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.10:59:37.896 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.10:59:37.897 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.10:59:37.897 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.10:59:37.897 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.10:59:37.898 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@33d7d560
25-08-22.10:59:37.899 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.10:59:38.072 [main            ] INFO  AiAgentChatService     - 使用模型ID: 2002
25-08-22.10:59:38.098 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.10:59:38.396 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.11:00:28.334 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 48260 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.11:00:28.336 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.11:00:34.269 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.11:00:34.281 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.11:00:34.282 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.11:00:35.388 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.11:00:36.831 [main            ] INFO  AgentTest              - Started AgentTest in 9.326 seconds (process running for 11.191)
25-08-22.11:00:36.840 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.11:00:36.846 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:00:36.847 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:00:36.848 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:00:36.850 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:00:36.851 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:00:36.852 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:00:36.917 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.11:00:37.715 [pool-2-thread-5 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@7be38290
25-08-22.11:00:37.717 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.11:00:39.283 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:39.284 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:39.295 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.11:00:39.295 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:39.314 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.11:00:39.315 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.11:00:39.315 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:00:39.694 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.11:00:39.743 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.11:00:39.746 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.11:00:39.746 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.11:00:39.746 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:00:39.922 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.11:00:39.979 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.11:00:39.979 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.11:00:39.979 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:40.107 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.11:00:40.108 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.11:00:40.108 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:40.112 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.11:00:40.218 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.11:00:40.219 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:40.233 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.11:00:40.234 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.11:00:40.234 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.11:00:40.234 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.11:00:40.235 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.11:00:40.235 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.11:00:40.235 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.11:00:41.456 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.11:00:41.456 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.11:00:41.456 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.11:00:41.457 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.11:00:41.457 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.11:00:41.457 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.11:00:42.004 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:42.005 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:42.013 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.11:00:42.013 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:42.014 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.11:00:42.014 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.11:00:42.014 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:00:42.189 [HttpClient-12-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 12b077b7-0
25-08-22.11:00:42.197 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.11:00:42.235 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.11:00:42.236 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.11:00:42.236 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.11:00:42.236 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:00:42.396 [HttpClient-13-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 36b64868-0
25-08-22.11:00:42.403 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.11:00:42.440 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.11:00:42.441 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.11:00:42.441 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:42.442 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.11:00:42.538 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.11:00:42.539 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:42.539 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.11:00:42.539 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:00:42.540 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.11:00:42.540 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.11:00:42.542 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.11:00:42.542 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.11:00:42.544 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@33d7d560
25-08-22.11:00:42.545 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.11:00:43.455 [boundedElastic-2] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.11:00:43.940 [boundedElastic-2] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@795d72a8
25-08-22.11:00:43.940 [boundedElastic-2] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.11:00:52.637 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.11:00:52.640 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.11:00:52.642 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.11:00:52.906 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.11:59:17.789 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 17008 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.11:59:17.792 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.11:59:23.761 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.11:59:23.774 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.11:59:23.774 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.11:59:24.940 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.11:59:26.516 [main            ] INFO  AgentTest              - Started AgentTest in 9.605 seconds (process running for 11.272)
25-08-22.11:59:26.532 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.11:59:26.547 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:59:26.549 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:59:26.553 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:59:26.555 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:59:26.560 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:59:26.564 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.11:59:26.784 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.11:59:27.766 [pool-2-thread-5 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@361f6b3f
25-08-22.11:59:27.769 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.11:59:29.409 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:29.409 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:29.416 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.11:59:29.417 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:29.428 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.11:59:29.429 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.11:59:29.429 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:59:29.818 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.11:59:29.868 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.11:59:29.873 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.11:59:29.873 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.11:59:29.873 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:59:30.132 [HttpClient-13-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.11:59:30.170 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.11:59:30.170 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.11:59:30.170 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:30.303 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.11:59:30.304 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.11:59:30.304 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:30.308 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.11:59:30.403 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.11:59:30.403 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:30.420 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.11:59:30.421 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.11:59:30.421 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.11:59:30.421 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.11:59:30.422 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.11:59:30.422 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.11:59:30.422 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.11:59:31.791 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.11:59:31.791 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.11:59:31.791 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.11:59:31.791 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.11:59:31.791 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.11:59:31.793 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.11:59:32.416 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:32.416 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:32.425 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.11:59:32.425 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:32.425 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.11:59:32.425 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.11:59:32.425 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:59:32.595 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.11:59:32.598 [HttpClient-12-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id 0be9438a-0
25-08-22.11:59:32.637 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.11:59:32.639 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.11:59:32.640 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.11:59:32.640 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.11:59:32.799 [HttpClient-13-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 327bad7e-0
25-08-22.11:59:32.807 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.11:59:32.855 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.11:59:32.857 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.11:59:32.857 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:32.858 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.11:59:32.956 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.11:59:32.956 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:32.956 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.11:59:32.956 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.11:59:32.957 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.11:59:32.959 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.11:59:32.960 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.11:59:32.960 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.11:59:32.962 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@19d8fe70
25-08-22.11:59:32.963 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.11:59:43.055 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.11:59:43.326 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:00:16.315 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 11432 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:00:16.320 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:00:21.526 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:00:21.541 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:00:21.541 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:00:22.665 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:00:24.072 [main            ] INFO  AgentTest              - Started AgentTest in 8.615 seconds (process running for 10.637)
25-08-22.12:00:24.080 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:00:24.085 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:00:24.085 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:00:24.088 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:00:24.089 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:00:24.090 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:00:24.090 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:00:24.153 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:00:25.157 [pool-2-thread-1 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@48789e10
25-08-22.12:00:25.160 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:00:26.794 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:26.795 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:26.804 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:00:26.804 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:26.817 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:00:26.817 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:00:26.817 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:00:27.259 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:00:27.337 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:00:27.341 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:00:27.341 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:00:27.341 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:00:27.527 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:00:27.565 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:00:27.565 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:00:27.565 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:27.706 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:00:27.706 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:00:27.707 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:27.711 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:00:27.824 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.12:00:27.824 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:27.842 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:00:27.843 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:00:27.844 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:00:27.844 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:00:27.844 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:00:27.844 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:00:27.845 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:00:29.157 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:00:29.157 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:00:29.157 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:00:29.158 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:00:29.158 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:00:29.157 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:00:29.780 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:29.781 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:29.787 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:00:29.788 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:29.788 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:00:29.788 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:00:29.788 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:00:29.958 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 2781a10f-0
25-08-22.12:00:29.966 [HttpClient-16-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:00:30.006 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:00:30.009 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:00:30.009 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:00:30.009 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:00:30.180 [HttpClient-13-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 6523a67c-0
25-08-22.12:00:30.190 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:00:30.231 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:00:30.233 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:00:30.233 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:30.233 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:00:30.335 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:00:30.335 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:30.335 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:00:30.335 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:00:30.336 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:00:30.337 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:00:30.337 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:00:30.338 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:00:30.338 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@33d7d560
25-08-22.12:00:30.340 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:00:31.631 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:00:32.190 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@76c523a2
25-08-22.12:00:32.190 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:00:32.435 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:00:32.435 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:

25-08-22.12:00:32.495 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:00:42.509 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:00:42.512 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:00:42.518 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:00:42.838 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:04:48.024 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 14372 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:04:48.027 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:04:53.373 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:04:53.383 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:04:53.383 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:04:54.596 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:04:55.896 [main            ] INFO  AgentTest              - Started AgentTest in 8.69 seconds (process running for 10.341)
25-08-22.12:04:55.902 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:04:55.908 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:04:55.909 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:04:55.911 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:04:55.912 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:04:55.912 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:04:55.914 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:04:55.999 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:04:56.738 [pool-2-thread-2 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a06123a
25-08-22.12:04:56.740 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:04:58.506 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:04:58.507 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:04:58.516 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:04:58.516 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:04:58.529 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:04:58.529 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:04:58.530 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:04:58.914 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:04:58.976 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:04:58.980 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:04:58.981 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:04:58.981 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:04:59.189 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:04:59.227 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:04:59.227 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:04:59.227 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:04:59.350 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:04:59.351 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:04:59.351 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:04:59.357 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:04:59.460 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4002
25-08-22.12:04:59.460 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:04:59.478 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:04:59.479 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:04:59.479 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:04:59.479 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:04:59.479 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:04:59.480 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:04:59.480 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:05:00.767 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:05:00.769 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:05:00.770 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:05:00.770 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:05:00.770 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:05:00.769 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:05:01.515 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:05:01.515 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:05:01.522 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:05:01.522 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:05:01.522 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:05:01.523 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:05:01.523 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:05:01.693 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 5eb032c3-0
25-08-22.12:05:01.705 [HttpClient-16-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:05:01.747 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:05:01.749 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:05:01.749 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:05:01.749 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:05:01.930 [HttpClient-13-Worker-1] WARN  McpClientSession       - Unexpected response for unknown id 99cf8fbb-0
25-08-22.12:05:01.939 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:05:01.976 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:05:01.976 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:05:01.976 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:05:01.977 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:05:02.061 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:05:02.061 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:05:02.062 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:05:02.062 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:05:02.062 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:05:02.064 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:05:02.064 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:05:02.065 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:05:02.065 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@33d7d560
25-08-22.12:05:02.066 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:05:02.960 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:05:03.497 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@172ac29d
25-08-22.12:05:03.497 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:05:03.961 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:05:03.961 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:05:04.015 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:05:14.035 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:05:14.038 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:05:14.041 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:05:14.327 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:08:19.022 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 33720 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:08:19.027 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:08:24.305 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:08:24.316 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:08:24.317 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:08:25.334 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:08:26.641 [main            ] INFO  AgentTest              - Started AgentTest in 8.435 seconds (process running for 10.198)
25-08-22.12:08:26.650 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:08:26.656 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:08:26.657 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:08:26.659 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:08:26.660 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:08:26.662 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:08:26.662 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:08:26.716 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:08:27.594 [ForkJoinPool.commonPool-worker-1] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ea7d601
25-08-22.12:08:27.596 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:08:29.382 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:29.383 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:29.390 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:08:29.390 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:29.404 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:08:29.405 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:08:29.405 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:08:29.813 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:08:29.886 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:08:29.892 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:08:29.892 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:08:29.892 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:08:30.106 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:08:30.149 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:08:30.151 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:08:30.151 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:30.278 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:08:30.278 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:08:30.278 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:30.283 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:08:30.283 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:30.299 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:08:30.300 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:08:30.300 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:08:30.300 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:08:30.300 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:08:30.300 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:08:30.300 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:08:31.547 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:08:31.548 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:08:31.548 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:08:31.548 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:08:31.549 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:08:31.549 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:08:32.090 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:32.091 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:32.098 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:08:32.098 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:32.098 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:08:32.098 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:08:32.098 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:08:32.282 [HttpClient-12-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id bc65f6f2-0
25-08-22.12:08:32.292 [HttpClient-16-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:08:32.329 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:08:32.331 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:08:32.331 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:08:32.331 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:08:32.487 [HttpClient-13-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 98b152fa-0
25-08-22.12:08:32.497 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:08:32.537 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:08:32.539 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:08:32.539 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:32.541 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:08:32.635 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:08:32.635 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:32.636 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:08:32.636 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:08:32.637 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:08:32.637 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:08:32.638 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:08:32.638 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:08:32.639 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@496338a0
25-08-22.12:08:32.640 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:08:33.789 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:08:34.270 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@7980b894
25-08-22.12:08:34.271 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:08:34.636 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:08:34.638 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:08:34.695 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:08:44.724 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:08:44.727 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:08:44.729 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:08:45.002 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:22:48.959 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 20420 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:22:48.962 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:22:55.829 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:22:55.843 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:22:55.843 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:22:56.588 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:22:57.665 [main            ] INFO  AgentTest              - Started AgentTest in 9.522 seconds (process running for 11.568)
25-08-22.12:22:57.670 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:22:57.674 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:22:57.674 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:22:57.675 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:22:57.676 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:22:57.677 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:22:57.678 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:22:57.730 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:22:58.557 [pool-2-thread-1 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@674aca07
25-08-22.12:22:58.561 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:23:00.466 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:00.466 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:00.474 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:23:00.474 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:00.491 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:23:00.492 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:23:00.492 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:23:00.913 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:23:00.970 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:23:00.976 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:23:00.976 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:23:00.976 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:23:01.163 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:23:01.212 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:23:01.214 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:23:01.214 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:01.339 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:23:01.340 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:23:01.340 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:01.344 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:23:01.344 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:01.359 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:23:01.360 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:23:01.360 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:23:01.360 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:23:01.360 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:23:01.361 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:23:01.361 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:23:02.901 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:23:02.901 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:23:02.904 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:23:02.905 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:23:02.905 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:23:02.906 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:23:03.555 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:03.556 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:03.562 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:23:03.562 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:03.562 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:23:03.562 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:23:03.562 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:23:03.724 [HttpClient-12-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 20b38fa4-0
25-08-22.12:23:03.730 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:23:03.766 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:23:03.767 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:23:03.767 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:23:03.767 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:23:03.936 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id ac080d85-0
25-08-22.12:23:03.946 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:23:04.276 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:23:04.276 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:23:04.276 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:04.277 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:23:04.371 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:23:04.372 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:04.372 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:23:04.372 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:23:04.374 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:23:04.374 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:23:04.375 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:23:04.376 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:23:04.376 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@6e8544cf
25-08-22.12:23:04.378 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:23:05.550 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:23:06.137 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@7aceebe7
25-08-22.12:23:06.138 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:23:06.748 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:23:06.748 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:23:06.807 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:23:16.829 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:23:16.834 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:23:16.837 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:23:17.114 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:27:33.927 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 34336 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:27:33.929 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:27:39.517 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:27:39.527 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:27:39.527 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:27:40.330 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:27:41.425 [main            ] INFO  AgentTest              - Started AgentTest in 8.293 seconds (process running for 10.023)
25-08-22.12:27:41.431 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:27:41.437 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:27:41.436 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:27:41.439 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:27:41.440 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:27:41.441 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:27:41.441 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:27:41.488 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:27:42.376 [pool-2-thread-5 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@186b6c48
25-08-22.12:27:42.379 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:27:44.177 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:44.179 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:44.187 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:27:44.187 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:44.202 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:27:44.202 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:27:44.202 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:27:44.578 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:27:44.625 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:27:44.630 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:27:44.630 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:27:44.630 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:27:44.793 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:27:44.830 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:27:44.830 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:27:44.830 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:44.952 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:27:44.952 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:27:44.952 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:44.956 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:27:44.957 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:44.969 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:27:44.970 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:27:44.970 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:27:44.970 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:27:44.972 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:27:44.972 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:27:44.972 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:27:46.246 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:27:46.247 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:27:46.247 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:27:46.247 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:27:46.248 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:27:46.248 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:27:46.825 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:46.825 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:46.833 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:27:46.833 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:46.834 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:27:46.834 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:27:46.834 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:27:46.996 [HttpClient-12-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id aab4638a-0
25-08-22.12:27:47.004 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:27:47.047 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:27:47.048 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:27:47.050 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:27:47.050 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:27:47.209 [HttpClient-13-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id bb0da89c-0
25-08-22.12:27:47.220 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:27:47.256 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:27:47.258 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:27:47.258 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:47.259 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:27:47.374 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:27:47.374 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:47.374 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:27:47.374 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:27:47.375 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:27:47.376 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:27:47.376 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:27:47.379 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:27:47.380 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@31c988b9
25-08-22.12:27:47.382 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:27:57.492 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:27:58.177 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:30:03.706 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 5216 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:30:03.709 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:30:09.390 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:30:09.406 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:30:09.406 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:30:10.443 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:30:11.683 [main            ] INFO  AgentTest              - Started AgentTest in 8.987 seconds (process running for 10.823)
25-08-22.12:30:11.691 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:30:11.696 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:11.697 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:11.698 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:11.699 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:11.699 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:11.700 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:11.746 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:30:12.690 [pool-2-thread-3 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@22125fee
25-08-22.12:30:12.693 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:30:14.438 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:14.438 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:14.458 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:30:14.459 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:14.476 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:30:14.477 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:30:14.477 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:14.941 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:30:15.006 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:30:15.011 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:30:15.011 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:30:15.011 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:15.319 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:30:15.362 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:30:15.363 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:30:15.363 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:15.534 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:30:15.535 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:30:15.535 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:15.543 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:30:15.543 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:15.559 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:30:15.560 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:30:15.561 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:30:15.561 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:30:15.561 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:30:15.561 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:30:15.562 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:30:16.882 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:30:16.883 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:30:16.883 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:30:16.885 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:30:16.885 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:30:16.885 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:30:17.433 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:17.433 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:17.440 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:30:17.440 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:17.440 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:30:17.440 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:30:17.440 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:17.592 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id abdc268a-0
25-08-22.12:30:17.603 [HttpClient-16-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:30:17.639 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:30:17.641 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:30:17.641 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:30:17.641 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:17.832 [HttpClient-13-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 4f656cf0-0
25-08-22.12:30:17.843 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:30:17.882 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:30:17.883 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:30:17.883 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:17.884 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:30:18.012 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:30:18.012 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:18.012 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:30:18.013 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:18.014 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:30:18.014 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:30:18.015 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:30:18.015 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:30:18.016 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@12b8193e
25-08-22.12:30:18.017 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:30:22.663 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:30:22.975 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:30:28.488 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 22324 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:30:28.490 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:30:33.774 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:30:33.783 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:30:33.783 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:30:34.805 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:30:36.046 [main            ] INFO  AgentTest              - Started AgentTest in 8.462 seconds (process running for 10.42)
25-08-22.12:30:36.052 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:30:36.058 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:36.058 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:36.060 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:36.060 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:36.060 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:36.061 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:30:36.109 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:30:36.967 [ForkJoinPool.commonPool-worker-1] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f029de2
25-08-22.12:30:36.970 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:30:39.207 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:39.208 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:39.219 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:30:39.220 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:39.236 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:30:39.236 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:30:39.236 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:39.628 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:30:39.705 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:30:39.709 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:30:39.710 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:30:39.710 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:39.948 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:30:39.992 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:30:39.994 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:30:39.994 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:40.145 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:30:40.145 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:30:40.145 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:40.149 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:30:40.151 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:40.169 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:30:40.171 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:30:40.171 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:30:40.172 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:30:40.172 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:30:40.172 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:30:40.172 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:30:41.467 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:30:41.467 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:30:41.467 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:30:41.469 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:30:41.469 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:30:41.469 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:30:42.074 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:42.075 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:42.082 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:30:42.083 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:42.083 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:30:42.083 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:30:42.083 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:43.259 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 6581736b-0
25-08-22.12:30:43.267 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:30:43.309 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:30:43.311 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:30:43.311 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:30:43.311 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:30:43.512 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 05f4d45a-0
25-08-22.12:30:43.527 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:30:43.571 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:30:43.572 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:30:43.573 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:43.573 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:30:43.669 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:30:43.669 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:43.669 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:30:43.671 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:30:43.672 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:30:43.672 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:30:43.673 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:30:43.673 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:30:43.673 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@1f018208
25-08-22.12:30:43.675 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:30:53.784 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:30:54.090 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:31:05.926 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 37032 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:31:05.928 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:31:11.218 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:31:11.229 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:31:11.231 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:31:12.180 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:31:13.386 [main            ] INFO  AgentTest              - Started AgentTest in 8.333 seconds (process running for 10.319)
25-08-22.12:31:13.391 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:31:13.396 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:31:13.396 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:31:13.398 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:31:13.398 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:31:13.399 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:31:13.399 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:31:13.445 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:31:14.832 [pool-2-thread-2 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@5b93a85b
25-08-22.12:31:14.834 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:31:16.473 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:16.473 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:16.483 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:31:16.484 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:16.499 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:31:16.500 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:31:16.500 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:31:16.942 [HttpClient-12-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:31:16.999 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:31:17.006 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:31:17.006 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:31:17.006 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:31:17.438 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:31:17.487 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:31:17.487 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:31:17.488 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:17.638 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:31:17.638 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:31:17.638 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:17.644 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:31:17.645 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:17.662 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:31:17.664 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:31:17.664 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:31:17.665 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:31:17.665 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:31:17.665 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:31:17.665 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:31:18.987 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:31:18.987 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:31:18.988 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:31:18.988 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:31:18.989 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:31:18.989 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:31:19.562 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:19.562 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:19.568 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:31:19.568 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:19.568 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:31:19.568 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:31:19.568 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:31:19.732 [HttpClient-12-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id b897cd67-0
25-08-22.12:31:19.741 [HttpClient-16-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:31:19.780 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:31:19.782 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:31:19.782 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:31:19.782 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:31:19.945 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id b135f2d0-0
25-08-22.12:31:19.955 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:31:20.000 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:31:20.000 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:31:20.000 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:20.001 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:31:20.094 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:31:20.094 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:20.094 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:31:20.094 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:31:20.095 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:31:20.096 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:31:20.096 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:31:20.097 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:31:20.097 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@12b8193e
25-08-22.12:31:20.098 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:31:21.291 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:31:21.912 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@4d7aade9
25-08-22.12:31:21.912 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:31:22.661 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:31:22.661 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:32:10.120 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoMapFuseable] :
	reactor.core.publisher.Mono.map(Mono.java:3490)
	org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:196)
Error has been observed at the following site(s):
	*____________Mono.map ⇢ at org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:196)
	|_   Mono.flatMapMany ⇢ at org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:197)
	|_           Flux.map ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregateAdvisedResponse(MessageAggregator.java:56)
	|_ Flux.doOnSubscribe ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:94)
	|_      Flux.doOnNext ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:105)
	|_  Flux.doOnComplete ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:144)
Original Stack Trace:
		at org.springframework.util.Assert.notNull(Assert.java:181)
		at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
		at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
		at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
		at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)
		at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:252)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
		at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:32:29.311 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:32:29.313 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:32:29.315 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:32:29.577 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:32:34.891 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 44544 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:32:34.894 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:32:40.509 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:32:40.521 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:32:40.522 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:32:41.585 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:32:42.762 [main            ] INFO  AgentTest              - Started AgentTest in 8.727 seconds (process running for 10.576)
25-08-22.12:32:42.769 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:32:42.775 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:32:42.775 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:32:42.778 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:32:42.778 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:32:42.779 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:32:42.779 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:32:42.832 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:32:43.734 [ForkJoinPool.commonPool-worker-1] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@6224b121
25-08-22.12:32:43.738 [ForkJoinPool.commonPool-worker-1] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:32:45.783 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:45.784 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:45.792 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:32:45.792 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:45.811 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:32:45.811 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:32:45.813 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:32:46.416 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:32:46.506 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:32:46.510 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:32:46.510 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:32:46.510 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:32:46.812 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:32:46.882 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:32:46.882 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:32:46.884 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:47.096 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:32:47.096 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:32:47.096 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:47.102 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:32:47.102 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:47.121 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:32:47.122 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:32:47.123 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:32:47.123 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:32:47.123 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:32:47.123 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:32:47.123 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:32:48.542 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:32:48.542 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:32:48.542 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:32:48.542 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:32:48.542 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:32:48.543 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:32:49.230 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:49.230 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:49.239 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:32:49.240 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:49.240 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:32:49.240 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:32:49.240 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:32:49.407 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 997397b5-0
25-08-22.12:32:49.416 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:32:49.458 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:32:49.461 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:32:49.461 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:32:49.461 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:32:49.616 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 0b81eb9d-0
25-08-22.12:32:49.638 [HttpClient-17-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:32:49.701 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:32:49.702 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:32:49.702 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:49.704 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:32:49.826 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:32:49.826 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:49.827 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:32:49.827 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:32:49.828 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:32:49.828 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:32:49.829 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:32:49.829 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:32:49.830 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@12b8193e
25-08-22.12:32:49.831 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:32:50.978 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:32:51.558 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@4d7aade9
25-08-22.12:32:51.559 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:32:52.053 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:32:52.053 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:33:39.078 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Assembly trace from producer [reactor.core.publisher.MonoMapFuseable] :
	reactor.core.publisher.Mono.map(Mono.java:3490)
	org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:196)
Error has been observed at the following site(s):
	*____________Mono.map ⇢ at org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:196)
	|_   Mono.flatMapMany ⇢ at org.springframework.ai.chat.client.advisor.AbstractChatMemoryAdvisor.doNextWithProtectFromBlockingBefore(AbstractChatMemoryAdvisor.java:197)
	|_           Flux.map ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregateAdvisedResponse(MessageAggregator.java:56)
	|_ Flux.doOnSubscribe ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:94)
	|_      Flux.doOnNext ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:105)
	|_  Flux.doOnComplete ⇢ at org.springframework.ai.chat.model.MessageAggregator.aggregate(MessageAggregator.java:144)
Original Stack Trace:
		at org.springframework.util.Assert.notNull(Assert.java:181)
		at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
		at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
		at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
		at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
		at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:113)
		at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:252)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
		at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
		at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
		at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
		at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
		at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
		at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
		at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:35:28.455 [PgVectorHikariPool housekeeper] WARN  HikariPool             - PgVectorHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m58s850ms935µs).
25-08-22.12:35:28.455 [MainHikariPool housekeeper] WARN  HikariPool             - MainHikariPool - Thread starvation or clock leap detected (housekeeper delta=1m42s134ms33µs400ns).
25-08-22.12:35:28.480 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:35:28.482 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:35:28.486 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:35:28.724 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:36:01.161 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 8684 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:36:01.165 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:36:06.943 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:36:06.959 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:36:06.960 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:36:08.236 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:36:09.916 [main            ] INFO  AgentTest              - Started AgentTest in 9.642 seconds (process running for 11.513)
25-08-22.12:36:09.929 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:36:09.936 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:36:09.937 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:36:09.939 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:36:09.942 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:36:09.943 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:36:09.944 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:36:10.017 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:36:11.023 [pool-2-thread-2 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@14b36354
25-08-22.12:36:11.026 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:36:12.573 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:12.574 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:12.586 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:36:12.586 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:12.604 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:36:12.605 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:36:12.605 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:36:13.077 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:36:13.154 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:36:13.159 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:36:13.160 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:36:13.160 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:36:13.343 [HttpClient-13-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:36:13.388 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:36:13.388 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:36:13.388 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:13.534 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:36:13.534 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:36:13.534 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:13.541 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:36:13.542 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:13.563 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:36:13.564 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:36:13.564 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:36:13.564 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:36:13.564 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:36:13.564 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:36:13.566 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:36:15.189 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:36:15.189 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:36:15.190 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:36:15.191 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:36:15.191 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:36:15.191 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:36:15.819 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:15.820 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:15.830 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:36:15.830 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:15.832 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:36:15.832 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:36:15.832 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:36:16.238 [HttpClient-16-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:36:16.249 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 44dc19a8-0
25-08-22.12:36:16.275 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:36:16.278 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:36:16.278 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:36:16.278 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:36:16.447 [HttpClient-13-Worker-2] WARN  McpClientSession       - Unexpected response for unknown id 21f52603-0
25-08-22.12:36:16.460 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:36:16.517 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:36:16.518 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:36:16.518 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:16.520 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:36:16.627 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:36:16.628 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:16.628 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:36:16.629 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:36:16.630 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:36:16.631 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:36:16.632 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:36:16.632 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:36:16.633 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@17d59c4e
25-08-22.12:36:16.634 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:36:18.000 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:36:18.641 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@6ebf4cd7
25-08-22.12:36:18.641 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:36:19.148 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:36:19.148 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:36:19.242 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:36:29.258 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:36:29.261 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:36:29.265 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:36:29.549 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:37:16.781 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 44736 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:37:16.784 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:37:21.942 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:37:21.955 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:37:21.955 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:37:22.837 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:37:23.950 [main            ] INFO  AgentTest              - Started AgentTest in 7.951 seconds (process running for 9.534)
25-08-22.12:37:23.958 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:37:23.962 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:23.963 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:23.964 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:23.964 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:23.965 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:23.966 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:24.011 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:37:24.906 [pool-2-thread-2 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@1a5f4bde
25-08-22.12:37:24.908 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:37:26.497 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:26.497 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:26.507 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:37:26.507 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:26.525 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:37:26.526 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:37:26.526 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:37:26.993 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:37:27.063 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:37:27.068 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:37:27.068 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:37:27.068 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:37:27.318 [HttpClient-13-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:37:27.371 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:37:27.372 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:37:27.372 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:27.531 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:37:27.532 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:37:27.532 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:27.538 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:37:27.539 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:27.583 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:37:27.584 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:37:27.584 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:37:27.585 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:37:27.585 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:37:27.585 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:37:27.585 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:37:28.884 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:37:28.883 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:37:28.885 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:37:28.884 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:37:28.885 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:37:28.885 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:37:29.398 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:29.398 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:29.408 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:37:29.408 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:29.408 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:37:29.409 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:37:29.409 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:37:29.562 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 1059e396-0
25-08-22.12:37:29.574 [HttpClient-16-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:37:29.608 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:37:29.612 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:37:29.612 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:37:29.612 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:37:29.769 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 74c04ead-0
25-08-22.12:37:29.780 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:37:29.822 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:37:29.823 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:37:29.823 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:29.824 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:37:29.914 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:37:29.915 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:29.915 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:37:29.915 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:37:29.916 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:37:29.916 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:37:29.917 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:37:29.917 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:37:29.917 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@17d59c4e
25-08-22.12:37:29.919 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:37:30.889 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:37:31.430 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@6ebf4cd7
25-08-22.12:37:31.430 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:37:31.868 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:37:31.868 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:37:31.928 [boundedElastic-1] ERROR MessageAggregator      - Aggregation Error
java.lang.IllegalArgumentException: Content must not be null for SYSTEM or USER messages
	at org.springframework.util.Assert.notNull(Assert.java:181)
	at org.springframework.ai.chat.messages.AbstractMessage.<init>(AbstractMessage.java:71)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:85)
	at org.springframework.ai.chat.messages.UserMessage.<init>(UserMessage.java:56)
	at org.springframework.ai.chat.client.advisor.PromptChatMemoryAdvisor.before(PromptChatMemoryAdvisor.java:133)
	at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:106)
	at reactor.core.publisher.FluxSubscribeOnValue$ScheduledScalar.run(FluxSubscribeOnValue.java:181)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-08-22.12:37:41.275 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:37:41.277 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:37:41.280 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:37:41.817 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:37:50.360 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 44060 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:37:50.363 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:37:55.721 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:37:55.738 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:37:55.738 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:37:56.618 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:37:57.787 [main            ] INFO  AgentTest              - Started AgentTest in 8.218 seconds (process running for 9.889)
25-08-22.12:37:57.795 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:37:57.799 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:57.800 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:57.802 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:57.803 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:57.803 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:57.804 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:37:57.847 [pool-2-thread-4 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:37:58.617 [pool-2-thread-4 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@139bc02b
25-08-22.12:37:58.618 [pool-2-thread-4 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:38:01.017 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:01.017 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:01.025 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:38:01.025 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:01.041 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:38:01.043 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:38:01.043 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:38:01.433 [HttpClient-12-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:38:01.482 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:38:01.487 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:38:01.487 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:38:01.488 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:38:01.652 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:38:01.687 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:38:01.688 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:38:01.688 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:01.807 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:38:01.808 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:38:01.808 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:01.812 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:38:01.812 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:01.824 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:38:01.825 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:38:01.825 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:38:01.825 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:38:01.825 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:38:01.826 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:38:01.826 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:38:03.264 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:38:03.264 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:38:03.264 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:38:03.265 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:38:03.266 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:38:03.266 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:38:03.795 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:03.796 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:03.802 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:38:03.803 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:03.803 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:38:03.803 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:38:03.803 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:38:03.977 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id e1970d40-0
25-08-22.12:38:03.987 [HttpClient-16-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:38:04.024 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:38:04.026 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:38:04.026 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:38:04.026 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:38:04.198 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id a381a30e-0
25-08-22.12:38:04.205 [HttpClient-17-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:38:04.248 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:38:04.248 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:38:04.249 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:04.250 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:38:04.345 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:38:04.345 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:04.346 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:38:04.346 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:38:04.347 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:38:04.347 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:38:04.347 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:38:04.349 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:38:04.350 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@31c988b9
25-08-22.12:38:04.351 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:38:05.304 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:38:05.814 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@164b9c8e
25-08-22.12:38:05.814 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:38:06.551 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:38:06.551 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:38:16.621 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:38:16.624 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:38:16.627 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:38:17.174 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:41:01.974 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 20512 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:41:01.977 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:41:07.198 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:41:07.209 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:41:07.209 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:41:08.063 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:41:09.110 [main            ] INFO  AgentTest              - Started AgentTest in 8.022 seconds (process running for 9.868)
25-08-22.12:41:09.117 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:41:09.120 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:41:09.121 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:41:09.121 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:41:09.123 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:41:09.123 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:41:09.123 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:41:09.163 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:41:10.072 [pool-2-thread-3 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@4608f401
25-08-22.12:41:10.076 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:41:12.311 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:12.311 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:12.321 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:41:12.321 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:12.336 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:41:12.337 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:41:12.337 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:41:12.785 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:41:12.882 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:41:12.887 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:41:12.887 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:41:12.887 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:41:13.106 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:41:13.159 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:41:13.159 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:41:13.160 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:13.322 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:41:13.322 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:41:13.324 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:13.333 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:41:13.334 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:13.361 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:41:13.362 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:41:13.362 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:41:13.362 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:41:13.364 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:41:13.364 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:41:13.364 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:41:15.141 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:41:15.141 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:41:15.141 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:41:15.143 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:41:15.143 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:41:15.143 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:41:15.665 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:15.665 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:15.675 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:41:15.675 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:15.676 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:41:15.676 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:41:15.676 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:41:15.849 [HttpClient-12-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 1b5f0e00-0
25-08-22.12:41:15.859 [HttpClient-16-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:41:15.898 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:41:15.899 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:41:15.899 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:41:15.899 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:41:16.068 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 725ca89f-0
25-08-22.12:41:16.077 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:41:16.118 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:41:16.120 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:41:16.120 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:16.121 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:41:16.220 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:41:16.221 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:16.221 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:41:16.221 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:41:16.224 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:41:16.225 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:41:16.225 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:41:16.226 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:41:16.228 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@31c988b9
25-08-22.12:41:16.230 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:41:17.503 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:41:18.119 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@164b9c8e
25-08-22.12:41:18.119 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:41:18.554 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:41:18.653 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:41:18.655 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:41:18.912 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-08-22.12:43:25.501 [main            ] INFO  AgentTest              - Starting AgentTest using Java 17.0.13 with PID 47344 (started by 19339 in E:\workSpace\ai-agent-app\ai-agent-app-app)
25-08-22.12:43:25.504 [main            ] INFO  AgentTest              - The following 1 profile is active: "dev"
25-08-22.12:43:30.767 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store_openai. Is empty: false
25-08-22.12:43:30.779 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store_openai in schema: public
25-08-22.12:43:30.779 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-08-22.12:43:31.693 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-08-22.12:43:32.809 [main            ] INFO  AgentTest              - Started AgentTest in 8.094 seconds (process running for 9.874)
25-08-22.12:43:32.815 [main            ] INFO  Application            - 预热AiAgent服务，开始
25-08-22.12:43:32.821 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:43:32.821 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:43:32.823 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:43:32.824 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:43:32.824 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:43:32.825 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3001, 3101, 3102, 3103, 3104, 3004]
25-08-22.12:43:32.874 [pool-2-thread-4 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-08-22.12:43:33.674 [pool-2-thread-4 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@27ab414d
25-08-22.12:43:33.676 [pool-2-thread-4 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-08-22.12:43:35.495 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:35.495 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:35.503 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:43:35.503 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:35.514 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:43:35.516 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:43:35.516 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:43:35.887 [HttpClient-12-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:43:35.942 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:43:35.946 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:43:35.946 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:43:35.946 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:43:36.132 [HttpClient-13-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:43:36.173 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:43:36.173 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:43:36.174 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:36.301 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:43:36.301 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:43:36.301 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:36.306 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:43:36.306 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3001","3101","3102","3103","3104","3004"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:36.321 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3001
25-08-22.12:43:36.324 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:43:36.325 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:43:36.325 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:43:36.325 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:43:36.325 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3004
25-08-22.12:43:36.326 [main            ] INFO  Application            - 预热AiAgent服务，完成
25-08-22.12:43:37.670 [ForkJoinPool.commonPool-worker-1] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104]
25-08-22.12:43:37.671 [pool-2-thread-7 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104]
25-08-22.12:43:37.671 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104]
25-08-22.12:43:37.672 [pool-2-thread-10] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104]
25-08-22.12:43:37.672 [pool-2-thread-8 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104]
25-08-22.12:43:37.672 [pool-2-thread-9 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104]
25-08-22.12:43:38.544 [main            ] INFO  ArmoryRootNode         - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:38.544 [main            ] INFO  AiClientApiNode        - Ai Agent 构建，API 构建节点 {"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:38.551 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-08-22.12:43:38.552 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:38.552 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置[{"mcpId":"5001","mcpName":"CSDN自动发帖","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8101\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8101","sseEndpoint":"/sse"},"transportType":"sse"},{"mcpId":"5002","mcpName":"微信公众号消息通知","requestTimeout":180,"transportConfig":"{\n\t\"baseUri\":\"http://106.54.0.156:8102\",\n        \"sseEndpoint\":\"/sse\"\n}","transportConfigSse":{"baseUri":"http://106.54.0.156:8102","sseEndpoint":"/sse"},"transportType":"sse"}]
25-08-22.12:43:38.552 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8101
25-08-22.12:43:38.552 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:43:38.749 [HttpClient-12-Worker-3] WARN  McpClientSession       - Unexpected response for unknown id 9bbe79fd-0
25-08-22.12:43:38.760 [HttpClient-16-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-csdn, version=1.0.0] and Instructions null
25-08-22.12:43:38.843 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-csdn, version=1.0.0], instructions=null]
25-08-22.12:43:38.844 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5001
25-08-22.12:43:38.844 [main            ] INFO  AiClientToolMcpNode    - http://106.54.0.156:8102
25-08-22.12:43:38.844 [main            ] INFO  AiClientToolMcpNode    - /sse
25-08-22.12:43:39.034 [HttpClient-17-Worker-1] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], Info: Implementation[name=mcp-server-weixin, version=1.0.0] and Instructions null
25-08-22.12:43:39.034 [HttpClient-13-Worker-0] WARN  McpClientSession       - Unexpected response for unknown id 05902f26-0
25-08-22.12:43:39.075 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[experimental=null, logging=LoggingCapabilities[], prompts=null, resources=null, tools=ToolCapabilities[listChanged=true]], serverInfo=Implementation[name=mcp-server-weixin, version=1.0.0], instructions=null]
25-08-22.12:43:39.076 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5002
25-08-22.12:43:39.076 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:39.078 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-08-22.12:43:39.217 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-08-22.12:43:39.217 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:39.218 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-08-22.12:43:39.218 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-08-22.12:43:39.219 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-08-22.12:43:39.220 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-08-22.12:43:39.220 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-08-22.12:43:39.222 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-08-22.12:43:39.222 [main            ] INFO  AgentTest              - 客户端构建：org.springframework.ai.chat.client.DefaultChatClient@31c988b9
25-08-22.12:43:39.223 [main            ] INFO  AiAgentChatService     - 智能体对话请求，参数 aiAgentId 3101 message hello
25-08-22.12:43:40.222 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Starting...
25-08-22.12:43:40.718 [main            ] INFO  HikariPool             - PgVectorHikariPool - Added connection org.postgresql.jdbc.PgConnection@164b9c8e
25-08-22.12:43:40.718 [main            ] INFO  HikariDataSource       - PgVectorHikariPool - Start completed.
25-08-22.12:43:41.171 [main            ] INFO  AiAgentChatService     - hello
25-08-22.12:43:41.171 [main            ] INFO  AiAgentChatService     - Use the information from the DOCUMENTS section to provide accurate answers but act as if you knew this information innately.
If unsure, simply state that you don't know.
Another thing you need to note is that your reply must be in Chinese!
DOCUMENTS:
    source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.63963133
    knowledge: spectrum_sense_gui

    08b4678ff765c2e92d099044b6c95328aca905b1source: master
    distance: 0.6444936
    knowledge: spectrum_sense_gui

    0000000000000000000000000000000000000000 08b4678ff765c2e92d099044b6c95328aca905b1 mingliu0608 <1933986099@qq.com> 1755795200 +0800	fetch: created

25-08-22.12:43:51.268 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown initiated...
25-08-22.12:43:51.271 [SpringApplicationShutdownHook] INFO  HikariDataSource       - PgVectorHikariPool - Shutdown completed.
25-08-22.12:43:51.274 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-08-22.12:43:51.547 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
